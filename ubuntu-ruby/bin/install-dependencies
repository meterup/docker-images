#!/usr/bin/env bash

set -euo pipefail

main() {
    # MIT Licensed.
    # gnupg: necessary for apt-key add
    # libpq-dev: Ruby Postgres client
    apt-get update && apt-get install -y --no-install-recommends \
        curl unzip make autoconf gcc zlib1g-dev gettext libssl-dev \
        libcurl4-openssl-dev g++ gnupg software-properties-common libsodium-dev
    curl --silent https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add -
    echo "deb http://apt.postgresql.org/pub/repos/apt/ bionic-pgdg main" >> /etc/apt/sources.list.d/pgdg.list
    apt-get update
    apt-get install -y --no-install-recommends postgresql-client-11 libpq-dev
}

main "$@"
